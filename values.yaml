# -- Default values for application.
# -- This is a YAML-formatted file.
# -- Declare variables to be passed into your templates.


## @param nameOverride String to fully override application.name template for all resources
nameOverride: ""

## @section Image parameters
## image onfiguration options for the container image used by all workloads.
image:
  ## @param image.repository The container image repository (e.g. nginx, myrepo/app) used for all workloads
  repository: ""
  ## @param image.pullPolicy Image pull policy for the container (Allowed values: Always, IfNotPresent)
  pullPolicy: IfNotPresent
  ## @param image.tag The image tag to use (ignored if overrideTag or shasum is set)
  tag: ""
  ## @param image.shasum The image digest (SHA256) to use instead of a tag (takes precedence over tag, but ignored if overrideTag is set)
  shasum: ""
  ## @param image.overrideTag If set, this tag overrides image.tag and image.shasum for all workloads (takes precedence over both tag and shasum)
  overrideTag: ""
  ## @param image.pullSecrets List of secrets containing credentials to image registry
  pullSecrets: []
    # - name: regcred

## @section Common parameters
## settings and values to add to all deployed objects
common:

  ## Labels to add to all resources created by the chart
  labels:
    ## @param common.labels.name Name label to override the default application name for all resources
    name: ""
    ## @param common.labels.component Component label to identify the application component
    component: ""
    ## @param common.labels.partOf Part-of label to group related resources
    partOf: ""
    ## @param common.labels.managedBy Managed-by label to specify the tool managing the resource
    managedBy: ""

  ## @param common.extraLabels Array with labels to add to all pods
  extraLabels: {}

  ## @param common.annotations Array with annotations to add to all pods
  annotations: {}
  # annotations:
  #   common: annotation

  ## @param common.topologySpreadConstraints List with constraints controlling how pods are spread across the cluster. Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/
  topologySpreadConstraints: []
  # topologySpreadConstraints:
  #   - maxSkew: 1
  #     topologyKey: topology.kubernetes.io/zone
  #     whenUnsatisfiable: DoNotSchedule
  #     labelSelector:
  #       matchLabels:
  #         app.kubernetes.io/name: app-name

  ## @param common.nodeSelector Array with Node labels for all pods assignment is rendered only if deployments and jobs nodeSelector is empty. ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector
  nodeSelector: {}

  ## @param common.tolerations List with Tolerations for all pods assignment is rendered only if deployments and jobs tolerations is empty ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
  tolerations: []


  ## @param common.affinity Array with Affinity for all pods assignment is rendered only if deployments and jobs affinity is empty. ref: https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/#schedule-a-pod-using-required-node-affinity
  affinity: {}

  ## @param common.env Array with extra environment variables to add to all pods
  env: {}
  # env:
  #   key: value

  ## @param common.extraEnv Array with extra environment variables to add to all pods as YAML
  extraEnv: []
    # - name: POD_IP
    #   valueFrom:
    #     fieldRef:
    #       fieldPath: status.podIP

  ## @param common.extraEnvConfigMaps Name of existing ConfigMap containing extra env vars for main deployment
  extraEnvConfigMaps: []
  # extraEnvConfigMaps:
  #   - common-configmap-name

  ## @param common.extraEnvSecrets List of names of existing Secret containing extra env vars for all pods
  extraEnvSecrets: []
  # extraEnvSecrets:
  #   - common-secret-name

  ## @param common.podSecurityContext Set common pod's Security Context (Is rendered only if deployments and jobs podSecurityContext is empty) ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
  podSecurityContext: {}
  # podSecurityContext:
  #   fsGroup: 1001

  ## @param common.priorityClassName String priorityClassName to add to all Pod: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#pod-priority/
  priorityClassName: ""

  ## @param common.containerSecurityContext Configure Container Security Context (is rendered only if deployments and jobs containerSecurityContext is empty) ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container
  containerSecurityContext: {}
  # containerSecurityContext:
  #   runAsUser: 1001
  #   allowPrivilegeEscalation: false
  #   capabilities:
  #     drop:
  #     - all
  #   readOnlyRootFilesystem: false
  #   runAsNonRoot: true

  ## @skip common.dnsConfig Set Dns config options. ref: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-dns-config
  dnsConfig:
    options:
    - name: ndots
      value: '1'

## @section Application parameters

application:
  ## @param application.enabled Specifies whether application should be created
  enabled: true
  ## @param application.kind Specifies whether application Deployment or StatefulSet should be created
  kind: Deployment

  ## @param application.labels Array with labels to add to application deployment
  labels: {}

  ## @param application.annotations Array with annotations to add to application deployment
  annotations: {}
  # annotations:
  #   application: annotation

  ## @param application.lifecycle Array with lifecycle definitions to add to application deployment
  lifecycle: {}
  # lifecycle:
  #   preStop:
  #     exec:
  #       command: ["/bin/sh", "-c", "sleep 10"]

  ## @param application.topologySpreadConstraints  list with constraints controlling how pods are spread across the cluster. Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/
  topologySpreadConstraints: []
  # topologySpreadConstraints:
  #   - maxSkew: 1
  #     topologyKey: topology.kubernetes.io/zone
  #     whenUnsatisfiable: DoNotSchedule
  #     labelSelector:
  #       matchLabels:
  #         app.kubernetes.io/name: app-name
  ## @param application.nodeSelector Array with Node labels for application pods assignment. ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector
  nodeSelector: {}


  ## @param application.tolerations list with Tolerations for application pods assignment. ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
  tolerations: []

  ## @param application.affinity Array with Affinity for application pods assignment. ref: https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/#schedule-a-pod-using-required-node-affinity
  affinity: {}

  ## @param application.jobs List of Kubernetes Job definitions
  jobs: []
  # jobs:
  #     ## @param application.jobs.nameSuffix Adds name suffix to job deployment
  #   - nameSuffix: "migrate"

  #     ## Object for configuration of helm hooks for migrating job (is configured only if application.command is not empty)
  #     annotations:
  #        ## @skip application.jobs.annotations.helm.sh/hook
  #       "helm.sh/hook": post-upgrade, post-install
  #        ## @skip application.jobs.annotations.helm.sh/hook-delete-policy
  #       "helm.sh/hook-delete-policy": hook-succeeded
  #        ## @skip application.jobs.annotations.helm.sh/hook-weight
  #       "helm.sh/hook-weight": "0"

  #     ## @param application.jobs.labels Array with labels to add to application deployment
  #     labels: {}

  #     ## @param application.jobs.env Array with extra environment variables to add to main deployment
  #     env: {}
  #     # env:
  #     #   key: value

  #     ## @param application.jobs.extraEnvSecrets Name of existing Secret containing extra env vars for main deployment
  #     extraEnvSecrets: []
  #     # extraEnvSecrets:
  #     #   - secret-name

  #     ## @param application.jobs.command Override default container command (useful when using custom images)
  #     command: []
  #     # command:
  #     #   - python
  #     #   - link_shortener/core/run_migration.py

  #     ## @param application.jobs.args Override default container args (useful when using custom images)
  #     args: []

  #     ## @param application.jobs.restartPolicy Only a RestartPolicy equal to Never or OnFailure is allowed
  #     restartPolicy: "Never"

  #     ## @param application.jobs.lifecycle Array with lifecycle definitions to add to job
  #     lifecycle: {}
  #     # lifecycle:
  #     #   preStop:
  #     #     exec:
  #     #       command: ["/bin/sh", "-c", "sleep 10"]

  #     ## @param application.jobs.volumes Optionally specify extra list of additional volumes for the job pod(s)
  #     volumes: []

  #     ## @param application.jobs.volumeMounts Optionally specify extra list of additional volumeMounts for the job container(s)
  #     volumeMounts: []

  ## @param application.podAnnotations Annotations for application pods. ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
  podAnnotations: {}
  # podAnnotations:
  #   pod: "annotations"
  #   another: "annotation"
  #   common: "{{ .Values.commonAnnotations.common }}"

  ## @param application.containerPortEnabled Whether enable container port
  containerPortEnabled: true

  ## @param application.containerPort Map container ports to host ports
  containerPort: 80

  ## @param application.containerPortName Names the default container port
  containerPortName: http

  ## @skip application.extraContainerPorts
  extraContainerPorts: []
  # extraContainerPorts:
  #   - name: https
  #     containerPort: 5001
  #     protocol: TCP

  ## @param application.replicaCount Number of application replicas to deploy
  replicaCount: 1

  ## @param application.podDisruptionBudget Limit the number of concurrent disruptions that your application experiences. Ref: https://kubernetes.io/docs/tasks/run-application/configure-pdb/
  podDisruptionBudget: {}
    # maxUnavailable: 1
    # minAvailable: 1

  ## Enable HorizontalPodAutoscaler for application pods
  autoscaling:
    ## @param application.autoscaling.enabled Whether enable horizontal pod autoscale
    enabled: false

    ## @param application.autoscaling.minReplicas Configure a minimum amount of pods
    minReplicas: 1

    ## @param application.autoscaling.maxReplicas Configure a maximum amount of pods
    maxReplicas: 100

    ## @param application.autoscaling.targetCPUUtilizationPercentage Define the CPU target to trigger the scaling actions (utilization percentage)
    targetCPUUtilizationPercentage: 80

    ## @param application.autoscaling.targetMemoryUtilizationPercentage Define the memory target to trigger the scaling actions (utilization percentage)
    targetMemoryUtilizationPercentage: 80

  ## @param application.revisionHistoryLimit Specifies how many old ReplicaSets for this Deployment you want to retain.
  revisionHistoryLimit: 4

  ## specifies the strategy used to replace old Pods by new ones. ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy
  updateStrategy:
    ## @param application.updateStrategy.type StrategyType - Can be set to RollingUpdate or Recreate
    type: RollingUpdate

  ## @param application.initContainers Add additional init containers to the application pod(s). ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
  initContainers: []
  # initContainers:
  #  - name: your-image-name
  #    image: your-image
  #    imagePullPolicy: Always
  #    command: ['sh', '-c', 'echo "hello world"']

  ## @param application.sidecars Add additional sidecar containers to the application pod(s)
  sidecars: []
  # sidecars:
  #   - name: your-image-name
  #     image: your-image
  #     imagePullPolicy: Always
  #     ports:
  #       - name: portname
  #         containerPort: 1234

  ## @param application.command Override default container command (useful when using custom images)
  command: []
  # command:
  #   - python
  #   - link_shortener/core/run_migration.py

  ## @param application.args Override default container args (useful when using custom images)
  args: []

  ## @param application.env Array with extra environment variables to add to main deployment
  env: {}
  # env:
  #   key: value

  ## @param application.extraEnv Array with extra environment variables to add to all pods as YAML
  extraEnv: []
    # - name: POD_IP
    #   valueFrom:
    #     fieldRef:
    #       fieldPath: status.podIP

  ## @param application.terminationGracePeriodSeconds Kubernetes waits for a specified time called the termination grace period. By default, this is 30 seconds.
  terminationGracePeriodSeconds: 30

  ## @param application.extraEnvConfigMaps Name of existing ConfigMap containing extra env vars for main deployment
  extraEnvConfigMaps: []
  # extraEnvConfigMaps:
  #   - configmap-name

  ## @param application.extraEnvSecrets Name of existing Secret containing extra env vars for main deployment
  extraEnvSecrets: []
  # extraEnvSecrets:
  #   - secret-name

  ## @param application.volumes Optionally specify extra list of additional volumes for the application pod(s)
  volumes: []

  ## @param application.volumeMounts Optionally specify extra list of additional volumeMounts for the application container(s)
  volumeMounts: []

  ## @param application.startupProbe customize startupProbe on application pods. ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
  startupProbe: {}

  ## @param application.livenessProbe customize livenessProbe on application pods
  livenessProbe: {}

  ## @param application.readinessProbe customize readinessProbe on application pods
  readinessProbe: {}

  ## @param application.podSecurityContext Set application pod's Security Context. ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
  podSecurityContext: {}
  # podSecurityContext:
  #   fsGroup: 1001

  ## @param application.priorityClassName String priorityClassName to add to application Pod: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#pod-priority/
  priorityClassName: ""

  ## @param application.containerSecurityContext Set Configure Container Security Context. ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container
  containerSecurityContext: {}
  # containerSecurityContext:
  #   runAsUser: 1001
  #   allowPrivilegeEscalation: false
  #   capabilities:
  #     drop:
  #     - all
  #   readOnlyRootFilesystem: false
  #   runAsNonRoot: true

  ## @skip application.dnsConfig Set Dns config options. ref: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-dns-config
  dnsConfig:
    options:
    - name: ndots
      value: '1'

  ## @skip application.resources
  ## We usually recommend not to specify default resources and to leave this as a conscious choice for the user. This also increases chances charts run on environments with little resources, such as Minikube. If you do want to specify resources, uncomment the following lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  resources: {}
  # resources:
  #   limits:
  #     cpu: 100m
  #     memory: 128Mi
  #   requests:
  #     cpu: 100m
  #     memory: 128Mi

  ## @param application.persistentVolumes List of persistentVolumes and their definitions
  persistentVolumes: []
  # persistentVolumes:
  #     ## @param application.persistentVolumes.name Specifies whether a persistentVolume should be created
  #   - name: ""

  #     ## @param application.persistentVolumes.accessModes accessModes of persistentVolume
  #     accessModes:
  #       - ReadWriteOnce

  #     ## @param application.persistentVolumes.labels Array with labels to add to persistentVolume
  #     labels: {}

  #     ## @param application.persistentVolumes.annotations Array with annotations to add to persistentVolume
  #     annotations: {}

  #     ## @param application.persistentVolumes.size Size of persistentVolume
  #     size: 10Gi

  #     ## @param application.persistentVolumes.storageClass Persistent Volume Storage Class. If defined, storageClassName: <storageClass>. If set to "-", storageClassName: "", which disables dynamic provisioning. If undefined (the default) or set to null, no storageClassName spec is set, choosing the default provisioner.
  #     storageClass: ""

  #     ## @param application.persistentVolumes.volumeBindingMode https://kubernetes.io/docs/concepts/storage/storage-classes/#volume-binding-mode
  #     volumeBindingMode: ""

  persistence:
    ## @param application.persistence.enabled enable persistence
    enabled: false
    ## @skip application.persistence.volumeClaimTemplates
    volumeClaimTemplates:
      - name: data
        accessModes: ["ReadWriteOnce"]
        storageClassName: "standard"
        size: 1Gi

## @section Cronjob parameters

cronjob:
  ## @param cronjob.enabled Specifies whether a cronjob should be created
  enabled: false

  ## @param cronjob.nameSuffix Adds name suffix to cronjob deployment
  nameSuffix: "cronjob"

  ## @param cronjob.labels Array with labels to add to cronjob deployment
  labels: {}

  ## @param cronjob.annotations Array with annotations to add to cronjob deployment
  annotations: {}
  # annotations:
  #   cronjob: annotation

  ## @param cronjob.nodeSelector Array with Node labels for cronjob pods assignment. ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector
  nodeSelector: {}

  ## @param cronjob.tolerations list with Tolerations for cronjob pods assignment ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
  tolerations: []

  ## @param cronjob.affinity Array with Affinity for cronjob pods assignment. ref: https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/#schedule-a-pod-using-required-node-affinity
  affinity: {}

  ## @skip cronjob.schedule
        ## Frequency of running the job
        ##   ┌───────────── minute (0 - 59)
        ##   │ ┌───────────── hour (0 - 23)
        ##   │ │ ┌───────────── day of the month (1 - 31)
        ##   │ │ │ ┌───────────── month (1 - 12)
        ##   │ │ │ │ ┌───────────── day of the week (0 - 6) (Sunday to Saturday;
        ##   │ │ │ │ │                         7 is also Sunday on some systems)
        ##   │ │ │ │ │
        ##   │ │ │ │ │
        ##   * * * * *
  schedule: "0 0 * * *"

  ## @param cronjob.args Override default container args (useful when using custom images)
  args: []

  ## @param cronjob.env Array with extra environment variables to add to cronjob
  env: {}
  # env:
  #   key: value

  ## @param cronjob.extraEnv Array with extra environment variables to add to all pods as YAML
  extraEnv: []
    # - name: POD_IP
    #   valueFrom:
    #     fieldRef:
    #       fieldPath: status.podIP

  ## @param cronjob.extraEnvConfigMaps Name of existing ConfigMap containing extra env vars for cronjob
  extraEnvConfigMaps: []
  # extraEnvConfigMaps:
  #   - configmap-name

  ## @param cronjob.extraEnvSecrets Name of existing Secret containing extra env vars for cronjob
  extraEnvSecrets: []
  # extraEnvSecrets:
  #   - secret-name

  ## @param cronjob.restartPolicy Only a RestartPolicy equal to Never or OnFailure is allowed
  restartPolicy: "OnFailure"

  ## @param cronjob.podSecurityContext Configure cronjob's Pods Security Context. ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
  podSecurityContext: {}
  # podSecurityContext:
  #   fsGroup: 1001

  ## @param cronjob.containerSecurityContext Configure Configure Container Security Context. ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container
  containerSecurityContext: {}
  # containerSecurityContext:
  #   runAsUser: 1001
  #   allowPrivilegeEscalation: false
  #   capabilities:
  #     drop:
  #     - all
  #   readOnlyRootFilesystem: false
  #   runAsNonRoot: true

  ## @param cronjob.resources We usually recommend not to specify default resources and to leave this as a conscious choice for the user. This also increases chances charts run on environments with little resources, such as Minikube. If you do want to specify resources, uncomment the following lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  resources: {}
  # resources:
  #   limits:
  #     cpu: 100m
  #     memory: 128Mi
  #   requests:
  #     cpu: 100m
  #     memory: 128Mi

  ## @param cronjob.command Override default container command (useful when using custom images)
  command: []

  ## @param cronjob.volumes Optionally specify extra list of additional volumes for the cronjob pod(s)
  volumes: []

  ## @param cronjob.volumeMounts Optionally specify extra list of additional volumeMounts for the cronjob container(s)
  volumeMounts: []

## @section External Secrets parameters
## secrets need to be also specified in `secretEnv` to be available for containers
externalSecrets:
  ## @param externalSecrets.enabled Specifies whether a automatic external secrets should be integrated
  enabled: false

  ## @param externalSecrets.secrets List of objects used to fetch by External-Secrets operator
  secrets: []
  # secrets:
  #     ## @param externalSecrets.name Name of external secret resource
  #   - name: ""

  #     ## @param externalSecrets.labels Array with labels to add to externalSecrets
  #     labels: {}

  #     ## @param externalSecrets.annotations Array with annotations to add to externalSecrets
  #     annotations: {}
  #     # annotations:
  #     #   externalSecrets: annotation

  #     ## @param externalSecrets.secretStoreKind String with kind of the SecretStore resource (SecretStore or ClusterSecretStore) Defaults to SecretStore
  #     secretStoreKind:  "SecretStore"

  #     ## @param externalSecrets.secretStoreName SecretStore is created by Terraform with the name `$APP_NAME-$APP_ENVIRONMENT`
  #     secretStoreName:  ## Empty will match SecretStore on the cluster

  #     ## @param externalSecrets.targetSecretName String with name for the target secret
  #     targetSecretName: ""

  #     ## @param externalSecrets.creationPolicy String with definition of how the operator creates the a secret
  #     creationPolicy: Owner

  #     ## @param externalSecrets.data defines the connection between the Kubernetes Secret keys and the Provider data
  #     data: []
  #     # data:
  #     # - secretKey: SQL_PASSWORD
  #     #   remoteRef:
  #     #     key: dev/infrastructure/cnpg/webapp-boar/webapp-main-dev/django_user
  #     #     property: password

  #     ## @param externalSecrets.template External Secrets template definition
  #     template: {}

  #     ## @param externalSecrets.refreshInterval Interval how often changes in secret will be updated
  #     refreshInterval: 5m

  #     ## @param externalSecrets.exposeToEnv Specifies whether the secret should be exposed as a container environment variable
  #     exposeToEnv: true

  #     ## @param externalSecrets.decodingStrategy Allows multiple decoding strategies during an object generation - (Auto, Base64, Base64URL, None - Default)
  #     decodingStrategy: None

  #     ## @param externalSecrets.extract list of variable names containing JSON objects that will be expanded to environment variables - each key inside the JSON object will correspond to a single environment variable
  #     extract: []

  #     ## @param externalSecrets.findRegex string used to find secrets based on regular expressions and rewrite the key names.
  #     findRegex: ""

  #     ## @param externalSecrets.extraDataFrom List of objects used to fetch all properties from the Provider key
  #     extraDataFrom: []
  #     # extraDataFrom:
  #     #   - extract:
  #     #       key: database-credentials
  #     #       version: v1
  #     #       property: data
  #     #       conversionStrategy: Default
  #     #       decodingStrategy: Auto
  #     #     rewrite:
  #     #     - regexp:
  #     #         source: "exp-(.*?)-ression"
  #     #         target: "rewriting-${1}-with-groups"

## @section Service Account parameters

serviceAccount:
  ## @param serviceAccount.create Specifies whether a service account should be created
  create: false

  ## @param serviceAccount.name The name of the service account to use. If not set and create is true, a name is generated using the fullname template
  name: ""

  ## @param serviceAccount.labels Array with labels to add to serviceAccount
  labels: {}

  ## @param serviceAccount.annotations Array with annotations to add to serviceAccount
  annotations: {}
  # annotations:
  #   serviceAccount: annotation

## @section Configmap parameters

configmap:
  ## @param configmap.enabled Specifies whether a configmap should be created
  enabled: false

  ## @param configmap.name  String with custom name of the configmap
  name: ""

  ## @param configmap.labels  Array with labels to add to configmap
  labels: {}

  ## @param configmap.annotations  Array with annotations to add to configmap
  annotations: {}
  # annotations:
  #   configmap: annotation

  ## @skip configmap.data
  data: {}

## @section Service parameters

service:
  ## @param service.enabled Specifies whether a service should be created
  enabled: true

  ## @param service.labels  Array with labels to add to service
  labels: {}

  ## @param service.annotations  Array with annotations to add to service
  annotations: {}
  # annotations:
  #   service: annotation

  ## @param service.type String which allows you to specify what kind of Service you want
  type: ClusterIP

  ## @param service.port Intiger with incoming port
  port: 80

  ## @param service.name String with name of the port
  name : http

  ## @param service.targetPortName String with name of the port to target
  targetPortName: http

  ## @param service.extraPorts Map with extra container ports
  extraPorts: []
  # extraPorts:
  #   - name: https
  #     port: 5001
  #     targetPort: 5001

## @section Ingress parameters

ingress:
  ## @param ingress.enabled Specifies whether a ingress should be created
  enabled: false
  ## @skip ingress.className
  className: ""
  ## @param ingress.labels  Array with labels to add to ingresss
  labels: {}

  ## @param ingress.annotations  Array with annotations to add to ingresss
  annotations: {}
  # annotations:
  #   kubernetes.io/ingress.class: nginx
  #   kubernetes.io/tls-acme: "true"
  ## @skip ingress.hosts
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  ## @skip ingress.tls
  tls: []
  # tls:
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

## @section Ingresses parameters

ingresses:
  ## @param ingresses.enabled Specifies whether a ingresses should be created
  enabled: false

  backendService:
    ## @param ingresses.backendService.name Name of the backend service. If not set, will use the full name of the application
    name: ""
    ## @param ingresses.backendService.port Port of the backend service. If not set, will use .Values.service.port
    port: ""
  ## @skip ingresses.paths
  paths:
  - path: /
    pathType: ImplementationSpecific
  ## @skip ingresses.rules
  rules: []
  # - annotations:
  #     kubernetes.io/ingress.class: nginx
  #   ingressClassName: nginx
  #   hosts:
  #   - host: chart-example.local
  #     # overwrite default paths:
  #     paths:
  #     - path: /
  #       pathType: ImplementationSpecific
  #     # add additional paths
  #     extraPaths: []
  # -  nameSuffix: "haproxy"
  #    ingressClassName: haproxy
  #    hosts:
  #    - host: chart-example.local
  #      # overwrite default paths:
  #      paths: []
  #      # add additional paths
  #      extraPaths: []
  #    tls: []
  #    - secretName: chart-example-tls
  #      hosts:
  #       - chart-example.local

httpRoute:
  ## @param httpRoute.enabled Enable HTTPRoute (Gateway API).
  enabled: false
  ## @skip httpRoute.parentRefs Parent references for the HTTPRoute. Set to null to omit parentRefs from the HTTPRoute.
  parentRefs: null
  # parentRefs:
  # - name: my-gateway
  #   sectionName: bar
  ## @param httpRoute.useDefaultGateways The default Gateway scope to use for this Route.
  useDefaultGateways:
  ## @param httpRoute.gatewayNamespace Namespace of the Gateway to attach this HTTPRoute to.
  gatewayNamespace: ""
  ## @param httpRoute.hostnames Hostnames for the HTTPRoute
  hostnames:
  ## @skip httpRoute.additionalLabels Parent references for the HTTPRoute.
  additionalLabels: {}
  ## @skip httpRoute.annotations Annotations for HTTPRoute
  annotations: {}
  ## @skip httpRoute.rules HTTPRoute Parameters
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: '{{ include "application.name" $ }}'
          port: '{{ .Values.service.port | int }}'

# -- Extra objects to deploy (value evaluated as a template)
# -- In some cases, it can avoid the need for additional, extended or adhoc deployments.
# -- See #595 for more details and traefik/tests/extra.yaml for example.
# -- https://github.com/traefik/traefik-helm-chart/pull/643/files
# -- Extra objects to deploy (value evaluated as a template)
## @skip extraObjects
extraObjects: []
# extraObjects:
#   - apiVersion: v1
#     kind: ConfigMap
#     metadata:
#       name: "extra"
#     data:
#       something: "extra"
#   - |
#     apiVersion: v1
#     kind: ConfigMap
#     metadata:
#       name: "templated"
#     data:
#       something: {{ printf "templated" }}

## @section Service Monitor parameters

serviceMonitor:
  ## @param serviceMonitor.enabled Specifies whether a service monitor should be created
  enabled: false

  ## @param serviceMonitor.labels Array with labels to add to serviceMonitor
  labels: {}

  ## @param serviceMonitor.interval How often should the metrics be scraped
  interval: 30s

  ## @param serviceMonitor.path HTTP path to scrape for metrics.
  path: /metrics

  ## @param serviceMonitor.scheme HTTP scheme to use for scraping.
  scheme: ""

  ## @param serviceMonitor.tlsConfig TLS configuration to use when scraping the endpoint
  tlsConfig: {}

  ## @param serviceMonitor.scrapeTimeout Timeout after which the scrape is ended
  scrapeTimeout: ""

## @section RBAC parameters.
rbac:
  ## @param rbac.enabled Specifies whether a role should be created
  enabled: false

  ## @param rbac.roles [array] Create Roles (Namespaced)
  roles: null
  # roles:
  #   - name: configmaps
  #     rules:
  #     - apiGroups:
  #       - ""
  #       resources:
  #       - configmaps
  #       verbs:
  #       - get
  #   - name: secrets
  #     rules:
  #     - apiGroups:
  #       - ""
  #       resources:
  #       - secrets
  #       verbs:
  #       - get

## @section Keda ScaledObject parameters. Ref: https://keda.sh/docs/2.13/concepts/scaling-deployments/
keda:

  ## @param keda.enabled Specifies whether a KEDA ScaledObject should be created
  enabled: false

  ## @param keda.labels Array with labels to add to all pods
  labels: {}

  ## @param keda.annotations Array with annotations to add to all pods
  annotations: {}
  # annotations:
  #   common: annotation

  ## @param keda.pollingInterval This is the interval to check each trigger on
  pollingInterval:  30

  ## @param keda.cooldownPeriod The period to wait after the last trigger reported active before scaling the resource back to 0
  cooldownPeriod:   300

  ## @param keda.idleReplicaCount If this property is set, KEDA will scale the resource down to this number of replicas.
  idleReplicaCount: null

  ## @param keda.minReplicaCount Minimum number of replicas KEDA will scale the resource down to.
  minReplicaCount:  1

  ## @param keda.maxReplicaCount This setting is passed to the HPA definition that KEDA will create for a given resource and holds the maximum number of replicas of the target resource.
  maxReplicaCount:  100

  ## @param keda.fallback [object] Defines a number of replicas to fall back to if a scaler is in an error state. Ref: https://keda.sh/docs/2.13/concepts/scaling-deployments/#fallback
  fallback: null

  ## @param keda.advanced [object] Ref: https://keda.sh/docs/2.13/concepts/scaling-deployments/#advanced
  advanced: null

  ## @param keda.triggers [array] List of triggers to activate scaling of the target resource. Ref: https://keda.sh/docs/2.13/concepts/scaling-deployments/#triggers
  triggers: null
  # triggers:
  #   - metricType: Utilization
  #     type: memory
  #     metadata:
  #       value: "40"
  #   - type: azure-servicebus
  #     metadata:
  #       topicName: sbtopic-app-service
  #       subscriptionName: sbsub-app-service
  #       namespace: servicebus-app-ns
  #       messageCount: 50 # queue size treshold KEDA needs to hit to scale up/down


## @section Keda HTTPScaledObject parameters. Ref: https://github.com/kedacore/http-add-on
kedaHttp:

  ## @param kedaHttp.enabled Specifies whether a KEDA HTTPScaledObject should be created
  enabled: false

  ## @param kedaHttp.labels Array with labels to add to the HTTPScaledObject
  labels: {}

  ## @param kedaHttp.annotations Array with annotations to add to the HTTPScaledObject
  ## Ref: https://github.com/kedacore/http-add-on#httpscaledobjectkedishskip-scaledobject-creation-annotation
  annotations: {}
  # annotations:
  #   httpscaledobject.keda.sh/skip-scaledobject-creation: "false"

  ## @param kedaHttp.hosts [array] Hosts to apply this scaling rule to (Host header match)
  hosts: []
  # hosts:
  #   - myhost.com

  ## @param kedaHttp.pathPrefixes [array] Path prefixes to apply this scaling rule to
  ## Default: ["/"]
  pathPrefixes:
    - /

  scaleTargetRef:

    ## @param kedaHttp.scaleTargetRef.name Name of the workload to scale
    name: ""

    ## @param kedaHttp.scaleTargetRef.kind Kind of the workload to scale
    kind: Deployment

    ## @param kedaHttp.scaleTargetRef.apiVersion API version of the workload to scale
    apiVersion: apps/v1

    ## @param kedaHttp.scaleTargetRef.service Name of the Service to route traffic to
    service: ""

    ## @param kedaHttp.scaleTargetRef.port Port number exposed by the Service
    port: null

    ## @param kedaHttp.scaleTargetRef.portName Port name exposed by the Service (alternative to port)
    portName: null

  replicas:

    ## @param kedaHttp.replicas.min Minimum number of replicas
    min: 0

    ## @param kedaHttp.replicas.max Maximum number of replicas
    max: 10

  ## @param kedaHttp.scaledownPeriod Period (in seconds) to wait after last active request before scaling down
  ## Default: 300
  scaledownPeriod: 300

  ## @param kedaHttp.scalingMetric [object] Scaling configuration (requestRate or concurrency)
  ## NOTE: requestRate and concurrency are mutually exclusive
  scalingMetric:

    ## @param kedaHttp.scalingMetric.requestRate [object] Scale based on HTTP request rate
    # requestRate:
    #
    #   ## @param kedaHttp.scalingMetric.requestRate.targetValue Target request rate value
    #   ## Default: 100
    #   targetValue: 100
    #
    #   ## @param kedaHttp.scalingMetric.requestRate.window Aggregation window
    #   ## Default: "1m"
    #   window: 1m
    #
    #   ## @param kedaHttp.scalingMetric.requestRate.granularity Request aggregation granularity
    #   ## Default: "1s"
    #   granularity: 1s

    ## @param kedaHttp.scalingMetric.concurrency [object] Scale based on request concurrency
    # concurrency:
    #
    #   ## @param kedaHttp.scalingMetric.concurrency.targetValue Target concurrency value
    #   ## Default: 100
    #   targetValue: 100
